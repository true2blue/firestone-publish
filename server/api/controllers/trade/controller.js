"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.TradeController = void 0;

var _trade = _interopRequireDefault(require("../../services/trade.service"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class TradeController {
  queryUserTrades(req, res) {
    _trade.default.queryTradesByUser(req.params.accesstoken).then(r => {
      r ? res.json(r) : res.json([]);
    }, err => {
      res.json({
        "error": err ? err.toString() : 'failed to query trades'
      });
    });
  }

  queryHistoryTrades(req, res) {
    _trade.default.queryHistoryTrades(req.body.accesstoken, req.body.createdDate, req.body.code).then(r => {
      r ? res.json(r) : res.json([]);
    }, err => {
      res.json({
        "error": err ? err.toString() : 'failed to query history trades'
      });
    });
  }

  updateTrade(req, res) {
    _trade.default.updateTrade(req.body.accesstoken, req.body.tradeid, req.body.update).then(r => {
      r ? res.json(r) : res.json({});
    }, err => {
      res.json({
        "error": err ? err.toString() : 'failed to update trade'
      });
    });
  }

  createTrade(req, res) {
    _trade.default.createTrade(req.body.accesstoken, req.body.strategyId, req.body.params).then(r => {
      r ? res.json(r) : res.json({});
    }, err => {
      res.json({
        "error": err ? err.toString() : 'failed to create trade'
      });
    });
  }

}

exports.TradeController = TradeController;

var _default = new TradeController();

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NlcnZlci9hcGkvY29udHJvbGxlcnMvdHJhZGUvY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJUcmFkZUNvbnRyb2xsZXIiLCJxdWVyeVVzZXJUcmFkZXMiLCJyZXEiLCJyZXMiLCJ0cmFkZVNlcnZpY2UiLCJxdWVyeVRyYWRlc0J5VXNlciIsInBhcmFtcyIsImFjY2Vzc3Rva2VuIiwidGhlbiIsInIiLCJqc29uIiwiZXJyIiwidG9TdHJpbmciLCJxdWVyeUhpc3RvcnlUcmFkZXMiLCJib2R5IiwiY3JlYXRlZERhdGUiLCJjb2RlIiwidXBkYXRlVHJhZGUiLCJ0cmFkZWlkIiwidXBkYXRlIiwiY3JlYXRlVHJhZGUiLCJzdHJhdGVneUlkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFTyxNQUFNQSxlQUFOLENBQXFCO0FBRXhCQyxFQUFBQSxlQUFlLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFVO0FBQ3JCQyxtQkFBYUMsaUJBQWIsQ0FBK0JILEdBQUcsQ0FBQ0ksTUFBSixDQUFXQyxXQUExQyxFQUF1REMsSUFBdkQsQ0FBNERDLENBQUMsSUFBSTtBQUM3REEsTUFBQUEsQ0FBQyxHQUFHTixHQUFHLENBQUNPLElBQUosQ0FBU0QsQ0FBVCxDQUFILEdBQWlCTixHQUFHLENBQUNPLElBQUosQ0FBUyxFQUFULENBQWxCO0FBQ0gsS0FGRCxFQUVHQyxHQUFHLElBQUk7QUFDTlIsTUFBQUEsR0FBRyxDQUFDTyxJQUFKLENBQVM7QUFBQyxpQkFBVUMsR0FBRyxHQUFHQSxHQUFHLENBQUNDLFFBQUosRUFBSCxHQUFvQjtBQUFsQyxPQUFUO0FBQ0gsS0FKRDtBQUtIOztBQUVEQyxFQUFBQSxrQkFBa0IsQ0FBQ1gsR0FBRCxFQUFNQyxHQUFOLEVBQVU7QUFDeEJDLG1CQUFhUyxrQkFBYixDQUFnQ1gsR0FBRyxDQUFDWSxJQUFKLENBQVNQLFdBQXpDLEVBQXNETCxHQUFHLENBQUNZLElBQUosQ0FBU0MsV0FBL0QsRUFBNEViLEdBQUcsQ0FBQ1ksSUFBSixDQUFTRSxJQUFyRixFQUEyRlIsSUFBM0YsQ0FBZ0dDLENBQUMsSUFBSTtBQUNqR0EsTUFBQUEsQ0FBQyxHQUFHTixHQUFHLENBQUNPLElBQUosQ0FBU0QsQ0FBVCxDQUFILEdBQWlCTixHQUFHLENBQUNPLElBQUosQ0FBUyxFQUFULENBQWxCO0FBQ0gsS0FGRCxFQUVHQyxHQUFHLElBQUk7QUFDTlIsTUFBQUEsR0FBRyxDQUFDTyxJQUFKLENBQVM7QUFBQyxpQkFBVUMsR0FBRyxHQUFHQSxHQUFHLENBQUNDLFFBQUosRUFBSCxHQUFvQjtBQUFsQyxPQUFUO0FBQ0gsS0FKRDtBQUtIOztBQUVESyxFQUFBQSxXQUFXLENBQUNmLEdBQUQsRUFBTUMsR0FBTixFQUFVO0FBQ2pCQyxtQkFBYWEsV0FBYixDQUF5QmYsR0FBRyxDQUFDWSxJQUFKLENBQVNQLFdBQWxDLEVBQStDTCxHQUFHLENBQUNZLElBQUosQ0FBU0ksT0FBeEQsRUFBaUVoQixHQUFHLENBQUNZLElBQUosQ0FBU0ssTUFBMUUsRUFBa0ZYLElBQWxGLENBQXVGQyxDQUFDLElBQUk7QUFDeEZBLE1BQUFBLENBQUMsR0FBR04sR0FBRyxDQUFDTyxJQUFKLENBQVNELENBQVQsQ0FBSCxHQUFpQk4sR0FBRyxDQUFDTyxJQUFKLENBQVMsRUFBVCxDQUFsQjtBQUNILEtBRkQsRUFFR0MsR0FBRyxJQUFJO0FBQ05SLE1BQUFBLEdBQUcsQ0FBQ08sSUFBSixDQUFTO0FBQUMsaUJBQVVDLEdBQUcsR0FBR0EsR0FBRyxDQUFDQyxRQUFKLEVBQUgsR0FBb0I7QUFBbEMsT0FBVDtBQUNILEtBSkQ7QUFLSDs7QUFFRFEsRUFBQUEsV0FBVyxDQUFDbEIsR0FBRCxFQUFNQyxHQUFOLEVBQVU7QUFDakJDLG1CQUFhZ0IsV0FBYixDQUF5QmxCLEdBQUcsQ0FBQ1ksSUFBSixDQUFTUCxXQUFsQyxFQUErQ0wsR0FBRyxDQUFDWSxJQUFKLENBQVNPLFVBQXhELEVBQW9FbkIsR0FBRyxDQUFDWSxJQUFKLENBQVNSLE1BQTdFLEVBQXFGRSxJQUFyRixDQUEwRkMsQ0FBQyxJQUFJO0FBQzNGQSxNQUFBQSxDQUFDLEdBQUdOLEdBQUcsQ0FBQ08sSUFBSixDQUFTRCxDQUFULENBQUgsR0FBaUJOLEdBQUcsQ0FBQ08sSUFBSixDQUFTLEVBQVQsQ0FBbEI7QUFDSCxLQUZELEVBRUdDLEdBQUcsSUFBSTtBQUNOUixNQUFBQSxHQUFHLENBQUNPLElBQUosQ0FBUztBQUFDLGlCQUFVQyxHQUFHLEdBQUdBLEdBQUcsQ0FBQ0MsUUFBSixFQUFILEdBQW9CO0FBQWxDLE9BQVQ7QUFDSCxLQUpEO0FBS0g7O0FBaEN1Qjs7OztlQW1DYixJQUFJWixlQUFKLEUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHJhZGVTZXJ2aWNlIGZyb20gJy4uLy4uL3NlcnZpY2VzL3RyYWRlLnNlcnZpY2UnXHJcblxyXG5leHBvcnQgY2xhc3MgVHJhZGVDb250cm9sbGVye1xyXG5cclxuICAgIHF1ZXJ5VXNlclRyYWRlcyhyZXEsIHJlcyl7XHJcbiAgICAgICAgdHJhZGVTZXJ2aWNlLnF1ZXJ5VHJhZGVzQnlVc2VyKHJlcS5wYXJhbXMuYWNjZXNzdG9rZW4pLnRoZW4ociA9PiB7XHJcbiAgICAgICAgICAgIHIgPyByZXMuanNvbihyKSA6IHJlcy5qc29uKFtdKTtcclxuICAgICAgICB9LCBlcnIgPT4ge1xyXG4gICAgICAgICAgICByZXMuanNvbih7XCJlcnJvclwiIDogZXJyID8gZXJyLnRvU3RyaW5nKCkgOiAnZmFpbGVkIHRvIHF1ZXJ5IHRyYWRlcyd9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeUhpc3RvcnlUcmFkZXMocmVxLCByZXMpe1xyXG4gICAgICAgIHRyYWRlU2VydmljZS5xdWVyeUhpc3RvcnlUcmFkZXMocmVxLmJvZHkuYWNjZXNzdG9rZW4sIHJlcS5ib2R5LmNyZWF0ZWREYXRlLCByZXEuYm9keS5jb2RlKS50aGVuKHIgPT4ge1xyXG4gICAgICAgICAgICByID8gcmVzLmpzb24ocikgOiByZXMuanNvbihbXSk7XHJcbiAgICAgICAgfSwgZXJyID0+IHtcclxuICAgICAgICAgICAgcmVzLmpzb24oe1wiZXJyb3JcIiA6IGVyciA/IGVyci50b1N0cmluZygpIDogJ2ZhaWxlZCB0byBxdWVyeSBoaXN0b3J5IHRyYWRlcyd9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVUcmFkZShyZXEsIHJlcyl7XHJcbiAgICAgICAgdHJhZGVTZXJ2aWNlLnVwZGF0ZVRyYWRlKHJlcS5ib2R5LmFjY2Vzc3Rva2VuLCByZXEuYm9keS50cmFkZWlkLCByZXEuYm9keS51cGRhdGUpLnRoZW4ociA9PiB7XHJcbiAgICAgICAgICAgIHIgPyByZXMuanNvbihyKSA6IHJlcy5qc29uKHt9KTtcclxuICAgICAgICB9LCBlcnIgPT4ge1xyXG4gICAgICAgICAgICByZXMuanNvbih7XCJlcnJvclwiIDogZXJyID8gZXJyLnRvU3RyaW5nKCkgOiAnZmFpbGVkIHRvIHVwZGF0ZSB0cmFkZSd9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVUcmFkZShyZXEsIHJlcyl7XHJcbiAgICAgICAgdHJhZGVTZXJ2aWNlLmNyZWF0ZVRyYWRlKHJlcS5ib2R5LmFjY2Vzc3Rva2VuLCByZXEuYm9keS5zdHJhdGVneUlkLCByZXEuYm9keS5wYXJhbXMpLnRoZW4ociA9PiB7XHJcbiAgICAgICAgICAgIHIgPyByZXMuanNvbihyKSA6IHJlcy5qc29uKHt9KTtcclxuICAgICAgICB9LCBlcnIgPT4ge1xyXG4gICAgICAgICAgICByZXMuanNvbih7XCJlcnJvclwiIDogZXJyID8gZXJyLnRvU3RyaW5nKCkgOiAnZmFpbGVkIHRvIGNyZWF0ZSB0cmFkZSd9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IFRyYWRlQ29udHJvbGxlcigpIl19